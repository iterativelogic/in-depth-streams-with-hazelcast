# Overview

In this lab we will be catching speeders!  To do this we will be enhancing the vehicle-monitoring-pipeline we built previously.  We will be using a custom aggregator to calculate speed based on a series of Pings.

It may not seem immediately obvious how speed can be considered an aggregation because we are more familiar with aggregations like "sum" or "average".  Hazelcast Jet supports these calculations with built in aggregates but it also support any user defined calculation on a collection of events.  If we have a all of the GPS pings from the last minute for one vehicle then we can calculate the distance and time between the first and the last ping and thus the speed of the vehicle.  This is a use case for a custom aggregation.  

Before starting, be sure you are familiar with the sections of the Jet reference manual pertaining to [the aggregation apis](https://docs.hazelcast.org/docs/jet/3.2.1/manual/#windowed-aggregation), [window definitions](https://docs.hazelcast.org/docs/jet/3.2.1/manual/#kinds-of-windows) and the [custom aggregation api](https://docs.hazelcast.org/docs/jet/3.2.1/manual/#implement-your-aggregate-operation).  



Expected Time: 2 hours

# Instructions

The basic approach for this solution should be 

- Group the stream of pings by VIN
- Define a sliding window which will contain the last 4 minutes of pings.  The window should update once every 15 seconds.  
- Define a custom aggregator that will compute the speed of each vehicle
- Filter for vehicles going faster than 75 mph.  
- Update "status" on the entry in the "vehicles" map to "SPEEDING".  

Remember that you must use a technique similar to the one used in Lab 05 to update the vehicles entry without overwriting information from other streams.  If this is done correctly, the UI will display speeders in yellow.



# 
