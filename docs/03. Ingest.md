# Overview

Until now we have only configured, started and stopped Jet.  In this lab we are finally going to do something useful with Jet.

The data source we will be working with is a JSON formatted web service that must be polled. 

# About the Data Source

To pull a batch of pings, use an HTTP get like the following: `http://fleetsim_beta:8000/pings?since=12345.678&limit=100

In the URL above, the "since" argument is used to retrieve only pings that have not already been processed.  It is the caller's responsibility to keep track of the highest timestamp seen so far.  Each subsequent call to the URL should pass the highest timestamp seen so far.

The "limit" argument is not required but if provided, limits the maximum number of responses.  This limit is applied _per vehicle_ so, if there are 250 vehicles and you pass a limit of 1 you will get back as many as 250 pings, one from each vehicle.

The response is JSON formatted.  An example is shown below:

```JSON
[ { "vin": "1GAHG89G72LV6BHT9", "latitude": 35.22833333333333, "longitude": -80.84277777777777, "time": 1575381330.749117 }, { "vin": "JN1CA31DXYMVPYYZZ", "latitude": 41.035, "longitude": -83.64805555555556, "time": 1575381322.5402546 }, { "vin": "1G1ZU67866ZKWY0HX", "latitude": 33.730000000000004, "longitude": -84.38611111111112, "time": 1575381319.0953646 }, { "vin": "2D4CN5DG9B4GVNWVY", "latitude": 35.030277777777776, "longitude": -85.3125, "time": 1575381320.5347319 }, { "vin": "3FTZX08211BVJKTLU", "latitude": 39.361666666666665, "longitude": -85.37305555555555, "time": 1575381332.5957212 }, { "vin": "1GTSCTE04AZKXE5UJ", "latitude": 38.349444444444444, "longitude": -81.64, "time": 1575381331.4384263 }]
```

# Design

The diagram below depicts how the system should look when you are done.

![schematic 1](media/schematic_3.png)

The pipeline you will develop will read GPS pings from the server and insert them into the "vehicles" map within the Jet/IMDG cluster.  A UI (provided) will display the GPS pings on a map.

# Instructions

The lab consists of implementing the ingest Jet pipeline, which should have the following components:

1. An event journal configuration for the "vehicles" map in `config/hazelcast.xml`
2. A non-distributed custom stream source to pull data from the web service and assign timestamps and keys.  Remember the source must keep track of the highest timestamp it has seen so it can pull only new data.  Your custom source should be fault tolerant (i.e. support snapshots). Note: timestamps should be converted to millis. Tuple2 implements Map.Entry!!
3. A sink to put the items into the "vehicles" map.  The key should be the vehicle VIN and the value should be a HazelcastJSONValue.

# Verification

Once everything is working you should be able to see the vehicles on the UI.  